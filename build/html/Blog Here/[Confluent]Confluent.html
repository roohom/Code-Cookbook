<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. [Confluent]Confluent快速上手 &mdash; Code-Cookbook 0.2 文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="4. [Flink]CommdLine+Springboot+flink无法指定配置文件启动" href="%5BFlink%5DCommdLine%2BSpringboot%2Bflink%E6%97%A0%E6%B3%95%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%AF%E5%8A%A8.html" />
    <link rel="prev" title="2. [Apollo]Apollo Config Center" href="%5BApollo%5DApollo%20Config%20Center.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Code-Cookbook
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">大数据</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Bigdata/index.html">Bigdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Bigdata%20Tools/index.html">Bigdata Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">博客</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Blogs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Boxed%20Error.html">1. [Springboot x spark]java.util.concurrent.ExecutionException: Boxed Error</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BApollo%5DApollo%20Config%20Center.html">2. [Apollo]Apollo Config Center</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. [Confluent]Confluent快速上手</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mysql-pxc-cluster">3.1. MySQL PXC Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="#confluent">3.2. Confluent</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#debezium">3.2.1. Debezium</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5DCommdLine%2BSpringboot%2Bflink%E6%97%A0%E6%B3%95%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%AF%E5%8A%A8.html">4. [Flink]CommdLine+Springboot+flink无法指定配置文件启动</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5DFlink-connector-http.html">5. [Flink]Flink-connector-http</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5DFlinkSource.html">6. [Flink]Flink Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5DProcessFunction%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%8A%9B%E5%87%BAInvalidProgramException.html">7. [Flink]ProcessFunction无法使用，抛出InvalidProgramException</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5D%E4%BD%BF%E7%94%A8%E7%8A%B6%E6%80%81%E7%AE%97%E5%AD%90%E5%B0%86stream%E8%81%9A%E5%90%88%E8%BE%93%E5%87%BA.html">8. [Flink]使用状态算子将stream聚合输出</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5D%E5%A6%82%E4%BD%95%E6%9B%B4%E9%80%9A%E7%94%A8%E5%9C%B0%E5%B0%86Kafka%28%E6%88%96%E5%85%B6%E4%BB%96%29%E6%95%B0%E6%8D%AE%E8%90%BD%E5%9C%B0Hive%EF%BC%9F.html">9. [Flink]如何更通用地将Kafka(或其他)数据落地Hive？</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BFlink%5D%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BA%8F%E5%88%97%E5%8C%96%E6%B6%88%E8%B4%B9Kafka%E6%95%B0%E6%8D%AE.html">10. [Flink]自定义序列化消费Kafka数据</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BGit%5DGit.html">11. [Git]Git问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BGit%5D%E8%AF%AF%E5%9C%A8Master%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E5%B9%B6commit%E6%97%A0%E6%B3%95push.html">12. [Git]误在Master分支开发并commit无法push</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHadoop%5DHadoop%20distcp.html">13. [Hadoop]Hadoop distcp</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHadoop%5D%E4%B8%80%E4%BA%9BHadoop%E9%97%AE%E9%A2%98.html">14. [Hadoop]一些Hadoop问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHive%5DHive%E5%88%86%E5%8C%BA%E8%A1%A8%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E5%88%86%E5%8C%BA.html">15. [Hive]Hive分区表批量删除分区</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHive%5D%E5%9C%A8%E6%8C%87%E5%AE%9A%E4%BD%8D%E7%BD%AE%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5.html">16. [Hive]在指定位置添加字段</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHive%5D%E5%A4%96%E9%83%A8%E8%A1%A8%E4%BF%AE%E6%94%B9%E4%B8%BA%E5%86%85%E9%83%A8%E8%A1%A8.html">17. [Hive]外部表修改为内部表</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BHive%5D%E6%9C%AC%E5%9C%B0%E8%BF%9E%E6%8E%A5%E9%9C%80%E8%A6%81Kerberos%E8%AE%A4%E8%AF%81%E7%9A%84Hive.html">18. [Hive]本地连接需要Kerberos认证的Hive</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJAVA%5DJava%20Cookbook.html">19. [JAVA]JAVA Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DAnnotation.html">20. [Java]元注解</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DAnnotation.html#id1">21. 注解解析</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DCollection.html">22. [Java]集合</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DCollection.html#id8">23. 简单(常用)数据结构</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DIO%E6%B5%81.html">24. [Java]<code class="docutils literal notranslate"><span class="pre">IO</span> <span class="pre">Stream</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DJava8%20Stream.html">25. [Java]Java8 Stream API</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DOOP.html">26. [Java]Java_OOP</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DSocket.html">27. [Java]Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5DSocket%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E8%87%B3%E6%9C%8D%E5%8A%A1%E7%AB%AF.html">28. [Java]使用Java在服务端和客户端之间传送文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E4%B8%89%E7%A7%8D%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E5%BA%94%E7%94%A8%E4%BA%8E%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8.html">29. [Java]三种策略模式应用于服务的启动</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E5%A4%9A%E7%BA%BF%E7%A8%8B.html">30. [Java]多线程</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E6%A8%A1%E5%9E%8B%E9%97%AE%E9%A2%98.html">31. [Java]生产者消费者模型问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E8%AE%A9%E9%A1%B9%E7%9B%AE%E9%A1%BA%E5%88%A9%E8%AF%BB%E5%8F%96resources%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E6%96%87%E4%BB%B6.html">32. [Java]让项目顺利读取resources目录下的文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html">33. [Java]设计模式</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html#continuing">34. Continuing…</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99.html">35. [Java]设计模式六大原则</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%A2%B3%E7%90%86.html">36. [Java]面向对象知识点梳理</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BJava%5D%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB.html">37. [Java]OOP防脱发指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BKerberos%5DMessage%20stream%20modified%20%2841%29%E9%94%99%E8%AF%AF.html">38. [Kerberos]Message stream modified (41)错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BKudu%5D%E5%85%B3%E4%BA%8EKudu%20Upsert%E5%88%97%E7%9A%84%E9%97%AE%E9%A2%98.html">39. [Kudu]关于Kudu Upsert列的问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BKudu%5D%E5%85%B3%E4%BA%8EKudu%E5%88%97%E7%9A%84%E9%A1%BA%E5%BA%8F%E7%9A%84%E4%BF%AE%E6%94%B9.html">40. [Kudu]关于Kudu列的顺序的修改</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BMongoDB%5DMongoDB%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2.html">41. [MongoDB]MongoDB基本查询</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BPySpark%5DPySpark.html">42. [Pyspark]PySpark</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BPySpark%5DPySparkOnYarn.html">43. [PySpark]PySpark On Yarn</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSQL%5DSQLIn%26NotIn.html">44. [SQL]<code class="docutils literal notranslate"><span class="pre">IN</span></code> OR <code class="docutils literal notranslate"><span class="pre">NOT</span> <span class="pre">IN</span></code> , IS A PROBLEM</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSQL%5D%E4%B8%9A%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%60create_time%60%E5%92%8C%60update_time%60.html">45. [SQL]业务数据库中的<code class="docutils literal notranslate"><span class="pre">create_time</span></code>和<code class="docutils literal notranslate"><span class="pre">update_time</span></code>分析时的问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSQL%5D%E4%B8%BA%E4%BB%80%E4%B9%88LEFT%20JOIN%E5%90%8E%E6%80%BB%E6%95%B0%E5%8D%B4%E4%B8%8E%E5%8F%B3%E8%A1%A8%E7%9A%84%E6%80%BB%E6%95%B0%E4%B8%80%E6%A0%B7%E4%BA%86%EF%BC%9F.html">46. [SQL]为什么LEFT JOIN后总数却与右表的总数一样了？</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSQL%5D%E6%B1%82%E7%94%A8%E6%88%B7%E4%BB%BB%E6%84%8F%E5%A4%A9%E8%BF%9E%E7%BB%AD%E7%99%BB%E5%BD%95%28%E6%AF%8F%E5%A4%A9%E4%B8%BA%E7%AC%AC%E5%A4%9A%E5%B0%91%E5%A4%A9%E8%BF%9E%E7%BB%AD%E7%99%BB%E5%BD%95%29.html">47. [SQL]求用户任意天连续登录(每天为第多少天连续登录)</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSQL%5D%E8%AE%A1%E7%AE%97%E6%8C%87%E5%AE%9A%E6%97%A5%E6%9C%9F%E7%9A%84%E5%B9%B4-%E5%91%A8%28%E4%B8%BA%E6%9F%90%E5%B9%B4%E7%9A%84%E7%AC%AC%E5%A4%9A%E5%B0%91%E5%91%A8%29.html">48. [SQL]计算指定日期的<strong>年-周</strong>(为某年的第多少周)</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BScala%5DClosure%26Currying.html">49. [Scala]函数中闭包(Closure)和柯里化(Currying)</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BShell%5DEOF.html">50. [Shell]EOF</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BShell%5Dshell%E8%84%9A%E6%9C%AC%E6%97%A5%E6%9C%9F%E9%80%92%E5%A2%9E%28%E8%B5%B7%E6%AD%A2%E6%97%A5%E6%9C%9F%E5%86%85%E9%80%92%E5%A2%9E%29.html">51. [Shell]Shell脚本日期递增(起止日期内递增)</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BShell%5D%E6%89%93%E5%8D%B0%E6%9C%AC%E6%9C%BAIP.html">52. [Shell]打印本机IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSparkStreaming%5D%E6%B6%88%E8%B4%B9kafka%E5%86%99%E5%85%A5Hive%E5%A4%B1%E8%B4%A5%E7%9A%84%E9%97%AE%E9%A2%98.html">53. [SparkStreaming]消费kafka写入Hive失败的问题Lease timeout of 0 seconds expired</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5DSparkSQL%20%E5%88%97%E8%BD%AC%E8%A1%8C%E7%9A%84%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95.html">54. [Spark]SparkSQL 列转行的一种方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5DSparkSQLJDBC%E5%B9%B6%E5%8F%91%E8%BF%9E%E6%8E%A5%E8%AF%BB%E5%8F%96.html">55. [Spark]SparkSQL JDBC并发连接读取</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5DSpark%E6%8F%90%E4%BA%A4%E4%BB%BB%E5%8A%A1RSA%20premaster%20secret%20error.html">56. [Spark]Spark提交任务RSA premaster secret error</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5DSpringboot%E6%95%B4%E5%90%88Spark%2C%20%E6%9C%AC%E5%9C%B0%E3%80%81%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2.html">57. [Spark]Springboot整合Spark, 本地、集群部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5D%E4%BD%BF%E7%94%A8Java%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AARow.html">58. [Spark]如何使用Java创建一个Row</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpark%5D%E5%B0%86Spark%20DataFrame%E4%B8%AD%E7%9A%84%E6%95%B0%E5%80%BC%E5%8F%96%E5%87%BA.html">59. [Spark]将Spark DataFrame中的数值取出</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BSpringboot%5DokHttp%E9%94%99%E8%AF%AFException%20in%20thread%20OkHttp%20Dispatcher%20java.lang.IllegalStateException%20closed.html">60. [Springboot]okHttp错误:<em>Exception</em> in thread “OkHttp Dispatcher” <em>java.lang.IllegalStateException</em>: closed</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5BVim%5D%E6%9F%A5%E6%89%BE%E5%92%8C%E6%9B%BF%E6%8D%A2%E5%91%BD%E4%BB%A4.html">61. [Vim]Vim查找和替换命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5Bdebezium%5D%E5%9C%A8%E5%90%AF%E5%8A%A8%E4%BB%BB%E5%8A%A1%E6%97%B6%E4%BC%A0%E5%85%A5SQL%E8%AF%AD%E5%8F%A5%E7%94%9F%E6%88%90Snapshot.html">62. [debezium]在启动任务时传入SQL语句生成Snapshot</a></li>
<li class="toctree-l2"><a class="reference internal" href="%5Bdebezium%5D%E7%83%AD%E4%BF%AE%E6%94%B9DebeziumMySQLConnector%E9%85%8D%E7%BD%AE.html">63. [debezium]热修改Debezium MySQL Connector配置</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">大数据辅助工具</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Auxiliary%20tools/index.html">Auxiliary tools</a></li>
</ul>
<p class="caption"><span class="caption-text">SQL相关</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../SQL/index.html">SQL</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Code-Cookbook</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Blogs</a> &raquo;</li>
      <li><span class="section-number">3. </span>[Confluent]Confluent快速上手</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Blog Here/[Confluent]Confluent.md.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="confluent-confluent">
<h1><span class="section-number">3. </span>[Confluent]Confluent快速上手<a class="headerlink" href="#confluent-confluent" title="永久链接至标题"></a></h1>
<section id="mysql-pxc-cluster">
<h2><span class="section-number">3.1. </span>MySQL PXC Cluster<a class="headerlink" href="#mysql-pxc-cluster" title="永久链接至标题"></a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#启停主节点node1，第一个以bootstrap方式启动的为主节点</span>
systemctl start mysql@bootstrap
systemctl stop mysql@bootstrap

<span class="c1">#启停从节点node2，应在主节点之后启动</span>
systemctl start mysql
systemctl stop mysql

<span class="c1">#启停从节点node3，应在主节点之后启动</span>
systemctl start mysql
systemctl stop mysql
</pre></div>
</div>
<ul>
<li><p>如果忘记安全停掉服务而直接关闭机器，下次重启会报错</p>
<ul>
<li><p>解决：</p></li>
<li><p>进入MySQL的目录</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /var/lib/mysql
</pre></div>
</div>
</li>
<li><p>将<code class="docutils literal notranslate"><span class="pre">safe_to_bootstrap</span></code>设置为1</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>root@node1 mysql<span class="o">]</span><span class="c1"># vim grastate.dat </span>
<span class="c1"># GALERA saved state</span>
version: <span class="m">2</span>.1
uuid:    8b431131-4f3a-11eb-88f3-970395fb2768
seqno:   <span class="m">9</span>
safe_to_bootstrap: <span class="m">1</span>
</pre></div>
</div>
</li>
<li><p>其他节点同上(如果启动不了)</p></li>
</ul>
</li>
<li><p>集群MySQL Master已开启binlog</p></li>
</ul>
</section>
<section id="confluent">
<h2><span class="section-number">3.2. </span>Confluent<a class="headerlink" href="#confluent" title="永久链接至标题"></a></h2>
<blockquote>
<div><p>当初Kafka创始团队里的三个成员单独出来创业所写的项目，构建与Kafka之上，也是一个流处理平台</p>
</div></blockquote>
<ul>
<li><p>启动步骤：</p>
<ul class="simple">
<li><p>启动zookeeper集群</p></li>
<li><p>启动MySQL集群（后面使用Debezium需要开启MySQL）</p></li>
<li><p>启动kafka集群</p></li>
</ul>
</li>
<li><p>启动连接</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /export/servers/confluent-5.5.1
nohup bin/connect-distributed ./etc/kafka/connect-distributed.properties <span class="p">&amp;</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>在此使用Conluent的Kafka Connector组件</strong></p>
<section id="debezium">
<h3><span class="section-number">3.2.1. </span>Debezium<a class="headerlink" href="#debezium" title="永久链接至标题"></a></h3>
<blockquote>
<div><p><em>Debezium is an open source distributed platform for change data capture. Start it up, point it at your databases, and your apps can start responding to all of the inserts, updates, and deletes that other apps commit to your databases. Debezium is durable and fast, so your apps can respond quickly and never miss an event, even when things go wrong.</em></p>
</div></blockquote>
<blockquote>
<div><p>Debezium是一个开源的分布式的捕获变化数据平台。启动它，将其指向您的数据库，您的应用程序可以开始响应其他应用程序提交给数据库的所有插入，更新和删除操作。Debezium持久且快速，因此即使出现问题，您的应用程序也可以快速响应，并且不会错过任何事件。</p>
</div></blockquote>
<blockquote>
<div><p>说白了类似于Canal</p>
</div></blockquote>
<p><img alt="debezium-architecture" src="../_images/debezium-architecture.png" /></p>
<p>本质上是伪装成MySQL的Slave，监听binlog</p>
<ul class="simple">
<li><p>默认情况下，Debezium将监听到的源数据库的数据变化同步到表名称相对应的Kafka topic中，对应的topic名称是<code class="docutils literal notranslate"><span class="pre">database.server.name</span></code>.<code class="docutils literal notranslate"><span class="pre">database_name</span></code>.<code class="docutils literal notranslate"><span class="pre">table_name</span></code></p></li>
<li><p>如果在MySQL中的DDL操作，则所有的DDL操作都被同步到Kafka的一个由参数<code class="docutils literal notranslate"><span class="pre">database.history.kafka.topic</span></code>所指定的topic中</p></li>
<li><p>更多的详细配置参数可以在官网<a class="reference external" href="https://debezium.io/documentation/reference/1.2/connectors/mysql.html#add-mysql-connector-configuration-to-kafka-connect">获得</a></p></li>
</ul>
<section id="id1">
<h4><span class="section-number">3.2.1.1. </span>基本操作<a class="headerlink" href="#id1" title="永久链接至标题"></a></h4>
<section id="id2">
<h5><span class="section-number">3.2.1.1.1. </span>如何提交一个任务？<a class="headerlink" href="#id2" title="永久链接至标题"></a></h5>
<ul>
<li><p>本地创建一个json文件，命名为<code class="docutils literal notranslate"><span class="pre">test.json</span></code></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;create_table_sync_test&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;connector.class&quot;</span><span class="p">:</span> <span class="s2">&quot;io.debezium.connector.mysql.MySqlConnector&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.88.161&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.port&quot;</span><span class="p">:</span> <span class="s2">&quot;3306&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.user&quot;</span><span class="p">:</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.password&quot;</span><span class="p">:</span> <span class="s2">&quot;123456&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.server.id&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.server.name&quot;</span><span class="p">:</span> <span class="s2">&quot;local_test&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;table.whitelist&quot;</span><span class="p">:</span> <span class="s2">&quot;uni.uni_table,uni.uni_table2&quot;</span><span class="p">,</span>
         <span class="nt">&quot;snapshot.mode&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">,</span>
         <span class="nt">&quot;snapshot.locking.mode&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
         <span class="nt">&quot;database.history.kafka.bootstrap.servers&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.88.161:9092,192.168.88.162:9092,192.168.88.163:9092&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;database.history.kafka.topic&quot;</span><span class="p">:</span> <span class="s2">&quot;dbhistory.ddl_history&quot;</span><span class="p">,</span> 
         <span class="nt">&quot;include.schema.changes&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span>
         <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p>完整版，本次测试不使用</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;pxc_flink_kudu_test_new&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;connector.class&quot;</span><span class="p">:</span> <span class="s2">&quot;io.debezium.connector.mysql.MySqlConnector&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.hostname&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.88.161&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.port&quot;</span><span class="p">:</span> <span class="s2">&quot;3306&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.user&quot;</span><span class="p">:</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.password&quot;</span><span class="p">:</span> <span class="s2">&quot;123456&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.server.id&quot;</span><span class="p">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.server.name&quot;</span><span class="p">:</span> <span class="s2">&quot;pxc_cluster&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.history.store.only.monitored.tables.ddl&quot;</span><span class="p">:</span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="nt">&quot;table.whitelist&quot;</span><span class="p">:</span> <span class="s2">&quot;unit.unit_test,unit_test2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;snapshot.mode&quot;</span><span class="p">:</span> <span class="s2">&quot;initial&quot;</span><span class="p">,</span>
        <span class="nt">&quot;snapshot.locking.mode&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="nt">&quot;max.queue.size&quot;</span><span class="p">:</span><span class="s2">&quot;81290&quot;</span><span class="p">,</span>
        <span class="nt">&quot;max.batch.size&quot;</span><span class="p">:</span><span class="s2">&quot;20480&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.history.kafka.bootstrap.servers&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.88.161:9092,192.168.88.162:9092,192.168.88.163:9092&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;database.history.kafka.topic&quot;</span><span class="p">:</span> <span class="s2">&quot;dbhistory.ddl_his_topic&quot;</span><span class="p">,</span> 
        <span class="nt">&quot;include.schema.changes&quot;</span><span class="p">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="nt">&quot;transforms&quot;</span><span class="p">:</span><span class="s2">&quot;route&quot;</span><span class="p">,</span>
        <span class="nt">&quot;transforms.route.type&quot;</span><span class="p">:</span> <span class="s2">&quot;org.apache.kafka.connect.transforms.RegexRouter&quot;</span><span class="p">,</span>
        <span class="nt">&quot;transforms.route.regex&quot;</span><span class="p">:</span><span class="s2">&quot;(.*)\\.(.*)\\.(.*)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;transforms.route.replacement&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.$2.$3&quot;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>切换进入刚才所编写的<code class="docutils literal notranslate"><span class="pre">test.json</span></code>所存放的目录</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /export/datas
</pre></div>
</div>
</li>
<li><p>使用crul命令来提交，注意&#64;后面的名称为文件的名称</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl -s -X POST -H <span class="s1">&#39;Content-Type: application/json&#39;</span> --data @test.json http://localhost:8083/connectors
</pre></div>
</div>
<p>成功会返回：</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;create_table_sync_test&quot;</span><span class="p">,</span>
    <span class="nt">&quot;config&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;connector.class&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.connector.mysql.MySqlConnector&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.hostname&quot;</span><span class="p">:</span><span class="s2">&quot;192.168.88.161&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.port&quot;</span><span class="p">:</span><span class="s2">&quot;3306&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.user&quot;</span><span class="p">:</span><span class="s2">&quot;root&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.password&quot;</span><span class="p">:</span><span class="s2">&quot;123456&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.server.id&quot;</span><span class="p">:</span><span class="s2">&quot;2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.server.name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test&quot;</span><span class="p">,</span>
        <span class="nt">&quot;table.whitelist&quot;</span><span class="p">:</span><span class="s2">&quot;uni.uni_table,uni.uni_table2&quot;</span><span class="p">,</span>
        <span class="nt">&quot;snapshot.mode&quot;</span><span class="p">:</span><span class="s2">&quot;initial&quot;</span><span class="p">,</span>
        <span class="nt">&quot;snapshot.locking.mode&quot;</span><span class="p">:</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.history.kafka.bootstrap.servers&quot;</span><span class="p">:</span><span class="s2">&quot;192.168.88.161:9092,192.168.88.162:9092,192.168.88.162:9092&quot;</span><span class="p">,</span>
        <span class="nt">&quot;database.history.kafka.topic&quot;</span><span class="p">:</span><span class="s2">&quot;dbhistory.ddl_history&quot;</span><span class="p">,</span>
        <span class="nt">&quot;include.schema.changes&quot;</span><span class="p">:</span><span class="s2">&quot;true&quot;</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;create_table_sync_test&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;tasks&quot;</span><span class="p">:[</span>

    <span class="p">],</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;source&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>使用crul来查看是否提交成功</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl http://localhost:8083/connectors
</pre></div>
</div>
<p>会返回类似于如下的信息即表明成功：</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s2">&quot;create_table_sync_test&quot;</span><span class="p">,</span><span class="s2">&quot;dbz_connect_test&quot;</span><span class="p">,</span><span class="s2">&quot;test&quot;</span><span class="p">,</span><span class="s2">&quot;dbz_connect_test_4&quot;</span><span class="p">,</span><span class="s2">&quot;dbz_connect_test_2&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p>接下来操作MySQL数据库，进行DDL操作，进行CURD操作，此时Kafka会自动创建新的topic，消费刚刚多出来的topic，里面的数据格式为json格式的数据，包含了你所做的所有操作(不包含SELECT，因为没意义)</p></li>
</ul>
</section>
<section id="id3">
<h5><span class="section-number">3.2.1.1.2. </span>数据同步<a class="headerlink" href="#id3" title="永久链接至标题"></a></h5>
<ul>
<li><p>注意<code class="docutils literal notranslate"><span class="pre">payload</span></code>里面的内容</p>
<ul class="simple">
<li><p>c：插入</p></li>
<li><p>u：更新</p></li>
<li><p>d：删除</p></li>
</ul>
</li>
<li><p>对MySQL中的表进行插入操作，消费kafka中的topic(<code class="docutils literal notranslate"><span class="pre">database.server.name</span></code>.<code class="docutils literal notranslate"><span class="pre">database_name</span></code>.<code class="docutils literal notranslate"><span class="pre">table_name</span></code>)中的数据</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;schema&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;before&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;after&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;version&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;connector&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.data.Enum&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;parameters&quot;</span><span class="p">:{</span>
                            <span class="nt">&quot;allowed&quot;</span><span class="p">:</span><span class="s2">&quot;true,last,false&quot;</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;db&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;table&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;server_id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;gtid&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;file&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;pos&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;row&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;thread&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;query&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.connector.mysql.Source&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;source&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;op&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;total_order&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;data_collection_order&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;transaction&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Envelope&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;payload&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;before&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;after&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;age&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;source&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.2.5.Final&quot;</span><span class="p">,</span>
            <span class="nt">&quot;connector&quot;</span><span class="p">:</span><span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test&quot;</span><span class="p">,</span>
            <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610010822000</span><span class="p">,</span>
            <span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="nt">&quot;db&quot;</span><span class="p">:</span><span class="s2">&quot;uni&quot;</span><span class="p">,</span>
            <span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;uni_table2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;server_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;gtid&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="s2">&quot;mysql_bin.000002&quot;</span><span class="p">,</span>
            <span class="nt">&quot;pos&quot;</span><span class="p">:</span><span class="mi">4257</span><span class="p">,</span>
            <span class="nt">&quot;row&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span>
            <span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="kc">null</span>
        <span class="p">},</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="s2">&quot;c&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610010822566</span><span class="p">,</span>
        <span class="nt">&quot;transaction&quot;</span><span class="p">:</span><span class="kc">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>更新操作update</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;schema&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;before&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;after&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;version&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;connector&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.data.Enum&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;parameters&quot;</span><span class="p">:{</span>
                            <span class="nt">&quot;allowed&quot;</span><span class="p">:</span><span class="s2">&quot;true,last,false&quot;</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;db&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;table&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;server_id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;gtid&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;file&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;pos&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;row&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;thread&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;query&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.connector.mysql.Source&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;source&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;op&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;total_order&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;data_collection_order&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;transaction&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Envelope&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;payload&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;before&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;age&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;after&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;high&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;source&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.2.5.Final&quot;</span><span class="p">,</span>
            <span class="nt">&quot;connector&quot;</span><span class="p">:</span><span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test&quot;</span><span class="p">,</span>
            <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610011059000</span><span class="p">,</span>
            <span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="nt">&quot;db&quot;</span><span class="p">:</span><span class="s2">&quot;uni&quot;</span><span class="p">,</span>
            <span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;uni_table2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;server_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;gtid&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="s2">&quot;mysql_bin.000002&quot;</span><span class="p">,</span>
            <span class="nt">&quot;pos&quot;</span><span class="p">:</span><span class="mi">4528</span><span class="p">,</span>
            <span class="nt">&quot;row&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span>
            <span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="kc">null</span>
        <span class="p">},</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="s2">&quot;u&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610011059616</span><span class="p">,</span>
        <span class="nt">&quot;transaction&quot;</span><span class="p">:</span><span class="kc">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>删除操作delete</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;schema&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;before&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Value&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;after&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;version&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;connector&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;name&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.data.Enum&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
                        <span class="nt">&quot;parameters&quot;</span><span class="p">:{</span>
                            <span class="nt">&quot;allowed&quot;</span><span class="p">:</span><span class="s2">&quot;true,last,false&quot;</span>
                        <span class="p">},</span>
                        <span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;db&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;table&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;server_id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;gtid&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;file&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;pos&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int32&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;row&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;thread&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;query&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;io.debezium.connector.mysql.Source&quot;</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;source&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;op&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;ts_ms&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;struct&quot;</span><span class="p">,</span>
                <span class="nt">&quot;fields&quot;</span><span class="p">:[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;id&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;total_order&quot;</span>
                    <span class="p">},</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;data_collection_order&quot;</span>
                    <span class="p">}</span>
                <span class="p">],</span>
                <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;transaction&quot;</span>
            <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;optional&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test.uni.uni_table2.Envelope&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;payload&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;before&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;high&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;after&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;source&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;1.2.5.Final&quot;</span><span class="p">,</span>
            <span class="nt">&quot;connector&quot;</span><span class="p">:</span><span class="s2">&quot;mysql&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;local_test&quot;</span><span class="p">,</span>
            <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610011376000</span><span class="p">,</span>
            <span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="s2">&quot;false&quot;</span><span class="p">,</span>
            <span class="nt">&quot;db&quot;</span><span class="p">:</span><span class="s2">&quot;uni&quot;</span><span class="p">,</span>
            <span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="s2">&quot;uni_table2&quot;</span><span class="p">,</span>
            <span class="nt">&quot;server_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;gtid&quot;</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;file&quot;</span><span class="p">:</span><span class="s2">&quot;mysql_bin.000002&quot;</span><span class="p">,</span>
            <span class="nt">&quot;pos&quot;</span><span class="p">:</span><span class="mi">4810</span><span class="p">,</span>
            <span class="nt">&quot;row&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;thread&quot;</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span>
            <span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="kc">null</span>
        <span class="p">},</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span><span class="s2">&quot;d&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ts_ms&quot;</span><span class="p">:</span><span class="mi">1610011376846</span><span class="p">,</span>
        <span class="nt">&quot;transaction&quot;</span><span class="p">:</span><span class="kc">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="rest-api">
<h5><span class="section-number">3.2.1.1.3. </span>REST API控制<a class="headerlink" href="#rest-api" title="永久链接至标题"></a></h5>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/</span> </code>
获取 Connect Worker 信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connector-plugins</span> </code>
列出 Connect Worker 上所有 Connector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;/tasks</span> </code>
获取 Connector 上 Task 以及相关配置的信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;/status</span> </code>
获取 Connector 状态信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;/config</span> </code>
获取 Connector 配置信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">-X</span> <span class="pre">PUT</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;/pause</span></code>
暂停 Connector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">-X</span> <span class="pre">PUT</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;/resume</span></code>
重启 Connector</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span> <span class="pre">-s</span> <span class="pre">-X</span> <span class="pre">DELETE</span> <span class="pre">&lt;Kafka</span> <span class="pre">Connect</span> <span class="pre">Worker</span> <span class="pre">URL&gt;:8083/connectors/&lt;Connector名字&gt;</span></code>
删除 Connector</p></li>
<li><p>举个栗子：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># 提交一个任务</span>
curl -s -X POST -H <span class="s1">&#39;Content-Type: application/json&#39;</span> --data @curd_one_topic_test.json http://localhost:8083/connectors
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="%5BApollo%5DApollo%20Config%20Center.html" class="btn btn-neutral float-left" title="2. [Apollo]Apollo Config Center" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="%5BFlink%5DCommdLine%2BSpringboot%2Bflink%E6%97%A0%E6%B3%95%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%AF%E5%8A%A8.html" class="btn btn-neutral float-right" title="4. [Flink]CommdLine+Springboot+flink无法指定配置文件启动" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2020-2022, roohom.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>