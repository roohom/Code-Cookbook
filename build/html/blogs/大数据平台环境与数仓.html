

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>29. 大数据平台环境与数仓 &mdash; Code-Cookbook 0.1 文档</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="30. 常用软件梳理" href="%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%A2%B3%E7%90%86.html" />
    <link rel="prev" title="28. 多线程" href="%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Code-Cookbook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0904%E6%A8%A1%E6%8B%9F%E9%9D%A2%E8%AF%95%E9%A2%98%E6%95%B4%E7%90%86.html">1. 模拟面试题整理</a></li>
<li class="toctree-l1"><a class="reference internal" href="1008%E6%A8%A1%E6%8B%9F%E9%9D%A2%E8%AF%95%E6%95%B4%E7%90%86.html">2. 实时存储NoSQL模拟面试</a></li>
<li class="toctree-l1"><a class="reference internal" href="Annotation.html">3. 元注解</a></li>
<li class="toctree-l1"><a class="reference internal" href="Annotation.html#id2">4. 注解解析</a></li>
<li class="toctree-l1"><a class="reference internal" href="Apache%20Avro.html">5. Apache Avro</a></li>
<li class="toctree-l1"><a class="reference internal" href="Bigdata%E9%98%B2%E6%87%B5%E9%80%BC%E6%8C%87%E5%8D%97.html">6. Bigdata Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="Collection.html">7. 集合</a></li>
<li class="toctree-l1"><a class="reference internal" href="Collection.html#id9">8. 简单(常用)数据结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="Flink%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%9F%BA%E7%A1%80%E5%8E%9F%E7%90%86.html">9. Flink基础配置与基础原理</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hbase.html">10. Hbase</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hive%20SQL50%E9%A2%98%E8%AE%B0%E5%BD%95.html">11. Hive SQL50题记录</a></li>
<li class="toctree-l1"><a class="reference internal" href="IO%E6%B5%81.html">12. <code class="docutils literal notranslate"><span class="pre">IO</span> <span class="pre">Stream</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="JDBC.html">13. JDBC</a></li>
<li class="toctree-l1"><a class="reference internal" href="Java%20Cookbook.html">14. JAVA Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="Java_Maven.html">15. Maven</a></li>
<li class="toctree-l1"><a class="reference internal" href="Java_OOP.html">16. Java_OOP</a></li>
<li class="toctree-l1"><a class="reference internal" href="Java%E4%B8%ADSocket%E5%8F%91%E9%80%81%E6%96%87%E4%BB%B6%E8%87%B3%E6%9C%8D%E5%8A%A1%E7%AB%AF.html">17. 使用Java在服务端和客户端之间传送文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="Kafka.html">18. Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="MySQL%2050%E9%A2%98%E8%AE%B0%E5%BD%95.html">19. MySQL 50题记录</a></li>
<li class="toctree-l1"><a class="reference internal" href="MySQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.html">20. MySQL语句执行顺序</a></li>
<li class="toctree-l1"><a class="reference internal" href="Redis.html">21. Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="SQL%20JOINS.html">22. SQL JOINS</a></li>
<li class="toctree-l1"><a class="reference internal" href="SimpleDataStruct.html">23. 简单(常用)数据结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="Socket.html">24. Socket</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sqoop%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8.html">25. Sqoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E5%8F%AF%E8%83%BD%E6%9C%89%E7%94%A8%E7%9A%84%E5%AD%A6%E4%B9%A0%E9%93%BE%E6%8E%A5.html">26. 可能有用的学习链接</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E5%8F%AF%E8%83%BD%E6%9C%89%E7%94%A8%E7%9A%84%E5%AD%A6%E4%B9%A0%E9%93%BE%E6%8E%A5.html#hive-orc">27. Hive - ORC 文件存储格式</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E5%A4%9A%E7%BA%BF%E7%A8%8B.html">28. 多线程</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">29. 大数据平台环境与数仓</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">29.1. 大数据项目开发流程</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">29.1.1. 开发流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">29.1.2. 业务模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">29.1.3. 技术选型</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id6">29.2. 数据仓库</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">29.2.1. 功能与应用场景</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">29.2.2. 特点</a></li>
<li class="toctree-l3"><a class="reference internal" href="#oltpolap">29.2.3. OLTP和OLAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">29.2.4. 整体架构</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#etl">29.2.4.1. ETL</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">29.2.4.2. 数据仓库</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">29.2.4.3. 应用</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">29.3. 维度和指标</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">29.3.1. 维度</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">29.3.2. 指标</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id15">29.3.2.1. 事实</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id16">29.4. 数据仓库建模</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id17">29.4.1. 建模方法</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">29.4.2. 事实表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">29.4.3. 维度表</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">29.4.4. 渐变维度</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">29.4.5. 维度的设计模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id22">29.4.6. 数据仓库分层</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">29.4.6.1. 分层设计</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">29.4.6.2. 常见分层</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%A2%B3%E7%90%86.html">30. 常用软件梳理</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%8B%89%E9%93%BE%E8%A1%A8.html">31. SCD</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%8B%89%E9%93%BE%E8%A1%A8.html#id2">32. 拉链表</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E4%B8%8EHive.html">33. 数据仓库</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E4%B8%8EHive.html#hive">34. Hive</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E6%95%B0%E6%8D%AE%E5%80%BE%E6%96%9C.html">35. 数据倾斜</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E6%A8%A1%E5%9E%8B%E9%97%AE%E9%A2%98.html">36. 生产者消费者模型问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%A2%B3%E7%90%86.html">37. JavaSE_Day08</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%A2%B3%E7%90%86.html#id9">38. 面向对象</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E6%A2%B3%E7%90%86.html#api">39. 常用API</a></li>
<li class="toctree-l1"><a class="reference internal" href="%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%90%84%E7%A7%8D%E5%85%B3%E7%B3%BB.html">40. Java OOP防脱发指南</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Code-Cookbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">29. </span>大数据平台环境与数仓</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/blogs/大数据平台环境与数仓.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1><span class="section-number">29. </span>大数据平台环境与数仓<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="id2">
<h2><span class="section-number">29.1. </span>大数据项目开发流程<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<div class="section" id="id3">
<h3><span class="section-number">29.1.1. </span>开发流程<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>可行性分析</p></li>
<li><p>需求分析</p></li>
<li><p>文档设计</p></li>
<li><p>代码开发</p></li>
<li><p>测试阶段</p></li>
<li><p>项目上线</p></li>
<li><p>项目维护</p></li>
</ul>
</div>
<div class="section" id="id4">
<h3><span class="section-number">29.1.2. </span>业务模块<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>数据生成</p>
<ul>
<li><p>业务数据</p>
<ul>
<li><p>用户数据</p></li>
<li><p>商品数据</p></li>
<li><p>订单数据</p></li>
</ul>
</li>
<li><p>用户行为数据：一般是存储在文件中</p>
<ul>
<li><p>记录的是用户在平台的所有的行为</p></li>
</ul>
</li>
<li><p>日志数据：机器运行日志，服务运行日志</p></li>
<li><p>爬虫数据</p></li>
<li><p>第三方数据</p></li>
</ul>
</li>
<li><p>数据采集</p>
<ul>
<li><p>将所有需要处理的数据采集到的大数据存储平台</p></li>
</ul>
</li>
<li><p>数据存储</p>
<ul>
<li><p>数据仓库</p></li>
</ul>
</li>
<li><p>数据处理：对数据进行处理、分析</p></li>
<li><p>数据应用</p>
<ul>
<li><p>构建BI可视化展示平台：报表</p></li>
<li><p>用户画像</p></li>
<li><p>推荐系统</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id5">
<h3><span class="section-number">29.1.3. </span>技术选型<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>采集工具</p>
<ul>
<li><p>kettle：数据量小、开发成本地、功能全面</p></li>
<li><p>Sqoop：采集数据库的数据，采集通过MapReduce来实现</p>
<ul>
<li><p>将MySQL数据写入Hive（HDFS）</p></li>
<li><p>将MySQL写入HDFS：MapReduce</p>
<ul>
<li><p>InputFormat</p>
<ul>
<li><p>TextInputFormat</p></li>
<li><p>DBInputFormat：专门用于读取数据库的数据</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Flume：采集数据流或者文件，基于每一条数据采集一次（实时采集）</p></li>
<li><p>Canal：采集数据库，性能要比Sqoop好得多</p></li>
<li><p>Logstash：实现数据采集的，功能最全，性能相比专业的工具要差一点</p></li>
</ul>
</li>
<li><p>数据存储</p>
<ul>
<li><p>HDFS：基于文件的存储，大数据量的离线数据持久化存储</p>
<ul>
<li><p>用Hive构建数据仓库</p></li>
<li><p>Hive：基于数据报表的存储，底层还是存储在HDFS</p></li>
</ul>
</li>
<li><p>Kafka：大数据量的实时临时性存储</p></li>
<li><p>Hbase：大数据量的实时持久性存储</p></li>
<li><p>ES：构建大数据量的全文索引存储</p></li>
<li><p>Redis：分布式小数据量的内存式高性能的实时存储</p></li>
<li><p>MySQL：小数据量的基于磁盘的存储</p></li>
</ul>
</li>
<li><p>数据处理</p>
<ul>
<li><p>MapReduce：离线批处理计算</p></li>
<li><p>Impala：基于内存的SQL引擎</p></li>
<li><p>Spark：功能全面的分析引擎</p>
<ul>
<li><p>离线计算：Sparkcore</p></li>
<li><p>交互式计算：SparkSQL</p></li>
<li><p>准实时计算：SparkStreaming</p></li>
</ul>
</li>
<li><p>Flink：实时计算</p></li>
<li><p>Kylin：高性能的离线计算</p></li>
</ul>
</li>
<li><p>辅助工具：</p>
<ul>
<li><p>zookeeper：集群管理</p>
<ul>
<li><p>辅助选举</p></li>
<li><p>存储关键性的数据</p></li>
</ul>
</li>
<li><p>Azkaban：实现任务调度</p></li>
<li><p>Oozie：实现任务调度</p></li>
<li><p>Hue：实现可视化</p></li>
<li><p>FineBI：商业化大数据可视化平台</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="id6">
<h2><span class="section-number">29.2. </span>数据仓库<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<div class="section" id="id7">
<h3><span class="section-number">29.2.1. </span>功能与应用场景<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>功能：将所有数据进行统一化规范化的存储</p></li>
<li><p>应用场景：面向主题的OLAP，用于对素有的数据进行统一化存储和规范化处理，支撑决策系统</p></li>
</ul>
</div>
<div class="section" id="id8">
<h3><span class="section-number">29.2.2. </span>特点<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>本沈不产生数据</p>
<ul>
<li><p>整个公司所有的业务产生的数据都会采集到存储到数据仓库</p></li>
<li><p>业务数据</p></li>
<li><p>用户行为数据</p></li>
<li><p>……</p></li>
</ul>
</li>
<li><p>本身不使用数据</p></li>
<li><p><strong>面向主题</strong>：<strong>按照业务对数据进行分类</strong></p>
<ul>
<li><p>最终目标：提供给整个公司所有数据的需求方提供对应额的数据</p></li>
<li><p>每个需求方需要的数据都不一样，根据需求划分主题</p>
<ul>
<li><p>运维分析主题</p></li>
<li><p>运营分析主题</p></li>
</ul>
</li>
<li><p>类似于超市中的商品分类</p></li>
</ul>
</li>
<li><p>数据集成：统一化的存储了所有应用需要的数据</p></li>
<li><p>非易失：保证所有数据按照历史归档存储，保证满足一定期效内数据应用</p></li>
<li><p>时变性：随着时间的变化，数据是会产生变化的</p>
<ul>
<li><p>不断增量添加新的数据</p>
<ul>
<li><p>T+1：今天处理昨天的数据</p>
<ul>
<li><p>采集：增量采集</p></li>
<li><p>全量采集：数据迁移，第一次采集</p></li>
</ul>
</li>
</ul>
</li>
<li><p>不断会删除老的数据</p></li>
<li><p>数据的聚合</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="oltpolap">
<h3><span class="section-number">29.2.3. </span>OLTP和OLAP<a class="headerlink" href="#oltpolap" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>OLTP：联机事务处理</p>
<ul>
<li><p>用于支撑业务存储，记录这些数据，用于提供用户在实现业务时的数据支持</p></li>
<li><p>满足行级的事务处理：针对每条数据的增删改查</p></li>
<li><p>面向用户业务</p></li>
</ul>
</li>
<li><p>OLAP：联机分析处理</p>
<ul>
<li><p>用于处理数据的存储</p></li>
<li><p>专门用于存储所有相关数据，对数据进行统一存储</p></li>
<li><p>根据不同的需求进行规范化的处理，得到最后的数据处理结果，支持决策系统</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id9">
<h3><span class="section-number">29.2.4. </span>整体架构<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>采集：将各种数据源的数据进行采集</p>
<ul>
<li><p>如果比较复杂：就落地HDFS,然后进行ETL</p></li>
<li><p>如果比较简单：就直接落地Hive，进入数据仓库</p></li>
</ul>
</li>
<li><p>ETL：对原始数据进行数据清洗</p></li>
<li><p>入库：对ETL以后的数据存储在数据仓库中</p></li>
<li><p>应用：实现数据的应用</p></li>
<li><p>业务数据：数据库</p>
<ul>
<li><p>用户数据、商品数据、订单数据等</p></li>
</ul>
</li>
<li><p>用户行为数据</p></li>
<li><p>爬虫数据</p></li>
<li><p>日志数据</p></li>
<li><p>第三方数据</p></li>
</ul>
<div class="section" id="etl">
<h4><span class="section-number">29.2.4.1. </span>ETL<a class="headerlink" href="#etl" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>过滤：过滤非法及不需要的数据</p>
<ul>
<li><p>非法IP访问的数据</p></li>
<li><p>字段不全的数据</p></li>
<li><p>不需要处理</p></li>
</ul>
</li>
<li><p>补全：补全需要的数据</p>
<ul>
<li><p>IP：补全国家、省份、城市、经纬度</p></li>
<li><p>客户端信息：操作系统、浏览器</p>
<ul>
<li><p>分析用户在不同操作系统中的分布</p></li>
</ul>
</li>
</ul>
</li>
<li><p>转换：将原始数据格式转换为目标格式</p></li>
</ul>
</div>
<div class="section" id="id10">
<h4><span class="section-number">29.2.4.2. </span>数据仓库<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>对每一层数据的处理</p></li>
<li><p>最终构建每个主题需要使用的数据</p></li>
<li><p>每个主题不同的分析的数据需求不同，可以拆分不同数据存储集市</p></li>
<li><p>数据集市</p>
<ul>
<li><p>对数据仓库中的数据按照业务需求划分更小的数据存储单位</p></li>
<li><p>一般以部门进行划分集市</p>
<ul>
<li><p>集市内部再划分主题</p></li>
</ul>
</li>
</ul>
</li>
<li><p>核心设计</p>
<ul>
<li><p>分层</p></li>
<li><p>建模</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id11">
<h4><span class="section-number">29.2.4.3. </span>应用<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>数据分析</p></li>
<li><p>搜索引擎</p></li>
<li><p>推荐系统</p></li>
<li><p>风控系统</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="id12">
<h2><span class="section-number">29.3. </span>维度和指标<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h2>
<div class="section" id="id13">
<h3><span class="section-number">29.3.1. </span>维度<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>本质：基于某种条件分析指标，得到结果</p>
<ul>
<li><p>理解为看待这个结果的角度</p></li>
<li><p>在SQL中体现为：分组的字段</p>
<ul>
<li><p>每天每个小时的PV：天、小时</p></li>
<li><p>每个地区每天的UV：地区、天</p></li>
</ul>
</li>
</ul>
</li>
<li><p>常见维度：</p>
<ul>
<li><p>基于时间维度分析</p>
<ul>
<li><p>分级：年、季度、月、天、小时</p>
<ul>
<li><p>分析一般基于小时分析：hourly分析</p></li>
<li><p>通过每个小时的结果的累加得到今天的结果</p></li>
<li><p>通过每天的结果累加得到月的结果</p></li>
<li><p>通过每月的结果的累计到的季度的结果</p></li>
<li><p>通过季度得到年</p></li>
</ul>
</li>
</ul>
</li>
<li><p>地域维度</p></li>
<li><p>平台维度</p></li>
<li><p>用户维度</p></li>
<li><p>商品维度</p></li>
<li><p>店铺维度</p></li>
<li><p>所有的指标都要基于一定的维度分析，才有意义，越精确的明细维度结果就越精确</p></li>
<li><p>注意：<strong>在数据中只要不是用于反映结果的数值就是维度数据</strong></p></li>
</ul>
</li>
<li><p>下钻与上卷</p>
<ul>
<li><p>下钻：从一个上层维度降低到一个下层维度</p>
<ul>
<li><p>要求：在对上层维度分析时，数据中必须包含下层维度</p></li>
</ul>
</li>
<li><p>上卷：从一个下层维度上升到一个上层维度</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3><span class="section-number">29.3.2. </span>指标<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>本质：<strong>通过指标分析的结果来反映一件事情的好坏</strong></p></li>
<li><p>必须基于对应的维度来衡量指标的结果</p></li>
</ul>
<div class="section" id="id15">
<h4><span class="section-number">29.3.2.1. </span>事实<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>分析的指标的结果就是<strong>事实</strong></p>
<ul>
<li><p>基于不同的角度来看待这个事实</p></li>
<li><p>就是基于不同的维度来分析指标</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p><strong>事实就是基于不同维度分析指标得到的结果</strong></p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="id16">
<h2><span class="section-number">29.4. </span>数据仓库建模<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h2>
<div class="section" id="id17">
<h3><span class="section-number">29.4.1. </span>建模方法<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>本质：就是<strong>决定了数据仓库中的数据表如何设计</strong></p></li>
<li><p><strong>ER建模</strong>：一般用于传统的业务数据库建模，英语支撑业务，实现业务上数据的存储</p>
<ul>
<li><p>找出整个业务中所有<strong>实体</strong>以及所有<strong>关系</strong></p></li>
<li><p>根据所有的实体，构建所有实体的属性</p></li>
<li><p>将所有关系以及实体构建成表</p></li>
</ul>
</li>
<li><p><strong>维度建模</strong>：一般用于数据仓库建模，用于对数据进行存储统计分析描述事实</p>
<ul>
<li><p>维度表</p></li>
<li><p>事实表</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id18">
<h3><span class="section-number">29.4.2. </span>事实表<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p><strong>基于不同维度下分析各个指标的结果，最终的事实</strong></p>
<ul>
<li><p>事实表是数据聚合后依据某个维度生成的结果表</p></li>
</ul>
</li>
<li><p>分析的指标类型：</p>
<ul>
<li><p><strong>可加</strong>数值类型：代表结果可以在任意维度聚合计算</p></li>
<li><p><strong>半可加</strong>数值类型：在特定一些条件维度下进行聚合是没有意义的</p></li>
<li><p><strong>不可加</strong>数值类型：转化率</p></li>
</ul>
</li>
<li><p>事实表分类：</p>
<ul>
<li><p><strong>事务事实表</strong>：<strong>最原始的</strong>分析的结果</p>
<ul>
<li><p>基于不同维度下的PV的结果：每个地区每个小时的PV</p></li>
<li><p>每天都按照每个小时统计一次</p></li>
</ul>
</li>
<li><p><strong>周期快照实时表</strong>：基于事务实时表构建的周期的事实表</p>
<ul>
<li><p>（周期性地）每天对前一天的数据进行统计</p></li>
<li><p>（周期性地）每个月对前一个月的数据进行统计</p></li>
<li><p>（周期性地）每年对前一年的数据进行统计</p></li>
</ul>
</li>
<li><p><strong>累积快照事实表</strong></p>
<ul>
<li><p>本质和应用是不断记录数据发生改变的数据</p></li>
<li><p>例如：</p>
<ul>
<li><p>每天统计前七天的数据</p></li>
<li><p>临时性地统计前六个月的数据</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id19">
<h3><span class="section-number">29.4.3. </span>维度表<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><p>一般把能够分类的属性单独列出来，成为维度表，在事实表中维护事实与维度的引用关系。</p>
</div></blockquote>
<ul>
<li><p>时间维度表</p></li>
<li><p>平台维度表</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">平台维度id</span>		<span class="n">平台类型</span>
	<span class="mi">1</span>			<span class="n">IOS</span>
	<span class="mi">2</span>		  <span class="n">Android</span>
</pre></div>
</div>
</li>
<li><p>地区维度表</p></li>
</ul>
</div>
<div class="section" id="id20">
<h3><span class="section-number">29.4.4. </span>渐变维度<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>数据维度会发生变化，如何保证维度发生变化的情况不影响事实？</p>
<ul>
<li><p>SCD1：直接更新，用于修改错误的维度</p></li>
<li><p><strong>SCD2</strong>：通过<strong>拉链表</strong>进行构建，记录所有维度变化的时间</p>
<ul>
<li><p><strong>拉链表：以时间段标记每个变化的维度的状态</strong></p></li>
</ul>
</li>
<li><p>SCD3：通过单独的列来记录之前的状态</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id21">
<h3><span class="section-number">29.4.5. </span>维度的设计模型<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li><p>雪花模型</p>
<ul>
<li><p>每个层级的维度是独立的一张表</p></li>
<li><p>特点：<strong>存储更好，引用了大量外检，减少实际数的存储</strong></p>
<ul>
<li><p>通过关联具体的维度表实现多级关联</p></li>
</ul>
</li>
</ul>
</li>
<li><p>星型模型/星座模型：</p>
<ul>
<li><p>特点：保证数据处理的性能更好，但是数据的冗余度高</p>
<ul>
<li><p>维度表不用关联其他子维度，直接记录具体的值</p></li>
</ul>
</li>
<li><p>所有关联维度放在一张维度表中</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id22">
<h3><span class="section-number">29.4.6. </span>数据仓库分层<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h3>
<div class="section" id="id23">
<h4><span class="section-number">29.4.6.1. </span>分层设计<a class="headerlink" href="#id23" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>本质：决定了数据进入数据仓库以后，经过固定的步骤处理，得到最后的结果</p></li>
</ul>
</div>
<div class="section" id="id24">
<h4><span class="section-number">29.4.6.2. </span>常见分层<a class="headerlink" href="#id24" title="永久链接至标题">¶</a></h4>
<ul class="simple">
<li><p>业务数据复杂，分层就越多</p></li>
<li><p>ODS(Operational Data Store)：所有数据进入数据仓库第一层，等于存储的是原始数据</p>
<ul>
<li><p>原始数据层</p></li>
<li><p>数据库：此层的表都存放在数据库中</p></li>
</ul>
</li>
<li><p>DWD(Data Warehouse Detail)：详细数据层，这层的数据是对ODS层的数据经过处理以后得到的结果</p>
<ul>
<li><p>对ODS层数据进行过滤、转换、补全等操作</p></li>
</ul>
</li>
<li><p>DWM(Data WareHouse Middle)：中间数据层，将上层的数进行轻度的汇总，构建维度等</p></li>
<li><p>DWS(Data WareHouse Service)：汇总数据层，将上层的数据做最终的汇总，得到不同的主题或者集市</p></li>
<li><p>APP/ADS(Application)：数据应用层，基于不同主题构建分析应用的结果</p></li>
<li><p>其他：</p>
<ul>
<li><p>DIM：维度数据层</p>
<ul>
<li><p>用于存放维度表</p></li>
</ul>
</li>
<li><p>TMP：临时数据层</p>
<ul>
<li><p>用于存放一些临时数据表，中间数据表</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6%E6%A2%B3%E7%90%86.html" class="btn btn-neutral float-right" title="30. 常用软件梳理" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" class="btn btn-neutral float-left" title="28. 多线程" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 版权所有 2020, roohom

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>